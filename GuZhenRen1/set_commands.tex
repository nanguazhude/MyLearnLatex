
\newcommand\currentchaptername{}%定义当前chapter名字
\newcommand\currentsectionname{}%定义当前section名字

\newcounter{vcurrentcountersection}                                 %用于获得当前section的编号
\setcounter{vcurrentcountersection}{0}                              %用于获得当前section的编号
\newcommand\currentcountersection{ \arabic{vcurrentcountersection} }%用于获得当前section的编号

\newcommand\newchapter[1]{                        %定义一个新的chapter
    \setcounter{secnumdepth}{3}                   %设置目录索引层次
    \setcounter{vcurrentcountersection}{0}        %将section编号重置为0
    \setcounter{section}{0}                       %将section编号重置为0
    \rhead{}                                      %删除右上页眉
    \renewcommand\currentchaptername{#1}          %设置当前chapter名称
    \chapter{ \currentchaptername }               %定义新的chapter
    \rhead{ \setheadenvironment
        第\,\zhnumber{ \thechapter }\,卷
        \,\;\currentchaptername\,\;
    }                                             %定义右上页眉
    \cleardoublepage                              %增加页面空白
}

\newcommand\newchapterindepend[1]{                        %定义一个新的chapter
    \cleardoublepage                              %增加页面空白
    \setcounter{vcurrentcountersection}{0}        %将section编号重置为0
    \setcounter{section}{0}                       %将section编号重置为0
    \rhead{}                                      %删除右上页眉
    \renewcommand\currentchaptername{#1}          %设置当前chapter名称
    \setcounter{secnumdepth}{-2}                  %暂停编号，但加入目录
    \chapter{ \currentchaptername }               %定义新的chapter
    \setcounter{secnumdepth}{3}                   %恢复编号
    \rhead{ \setheadenvironment
        \,\;\currentchaptername\,\;
    }                                             %定义右上页眉
}

\newcommand\newsection[1]{                        %定义一个新的section
    \clearpage                                    %增加页面空白
    \setcounter{secnumdepth}{3}                   %设置目录索引层次
    \rhead{}                                      %删除右上页眉
    \renewcommand\currentsectionname{#1}          %定义当前section名字
    \stepcounter{vcurrentcountersection}          %设置当前section计数，应当与section自动计数一致
%    \noindent $\xrfill[0.6ex]{1pt}[colortextthisproject]$            %增加分割线
    \section{ \currentsectionname }               %创建section
    \noindent $\xrfill[0.6ex]{0.3pt}[colortextthisproject]$              %增加分割线
    \rhead{ \setheadenvironment
        第\,\zhnumber{ \thechapter }\,卷
        \,\;\currentchaptername\,\;
        第\,\zhnumber{\currentcountersection}\,章
        \,\;\currentsectionname 
    }                                             %定义右上页眉
    \par
}
 
\newcommand\newsectionindepend[1]{                        %定义一个新的section
    \clearpage                                    %增加页面空白
    \rhead{}                                      %删除右上页眉
    \renewcommand\currentsectionname{#1}          %定义当前section名字
%    \noindent $\xrfill[0.6ex]{1pt}[colortextthisproject]$             %增加分割线
    \setcounter{secnumdepth}{-2}                  %暂停编号，但加入目录
    \section{ \currentsectionname }               %创建section
    
    \setcounter{secnumdepth}{3}                   %恢复编号
    \noindent $\xrfill[0.6ex]{0.3pt}[colortextthisproject]$              %增加分割线
    \rhead{ \setheadenvironment
        \,\;\currentsectionname\,\;
    }                                             %定义右上页眉
    \par
}
